{"version":3,"sources":["app.js","app.pb.components.js","app.pb.edtior.js","app.pb.elements.js"],"names":["pageBuilder","init","$","event","addProp","window","resize","bind","loadIframe","initControllers","arg","Components","Elements","Editor","initContainers","self","this","iframe","container","contents","find","sidebar","components","elements","editor","on","sidebarNav","viewport_height","height","viewport_width","width","mobile","navigator","userAgent","match","check","el","param","attr","hidePreloader","fadeOut","showPreloader","fadeIn","iframe_url","append","e","preventDefault","section","hasClass","addClass","siblings","removeClass","elem","component_id","appendSection","setUniqueId","sortableComponents","sortableContainers","appendHelpers","appendDroppableArea","removeDroppableArea","focusDroppableArea","preventDragOver","dropComponents","removeWidget","length","sortable","handle","closest","cancel","classes","ui-sortable","drag_handlers","each","i","dataTransfer","setData","target","id","widgets","after","drop_area","new_area","setTimeout","remove","data","getData","loadComponent","component","component_url","ajax","url","type","success","appendComponent","wrapWidgetToSection","appendElemHelpers","appendColumnHelpers","sortableElements","sortableColumns","new_section_widget","before","parent","last","widget","parents","resetEditedElem","trigger","style_id","chache_styles","header_chache_styles","settings","default","main","inline","grid","column","title","paragraph","data_base","image","button","media_settings","desktop","tablet","media_viewport","Media","focusEditble","unFocusEditble","styleElem","collectDimensionValues","updateElementText","insertLink","editLink","changeHTMLTags","addLinkAttributes","showEditorMenuSection","observeDimensionValues","changeInputLang","showHiddenTools","changeViewport","isEmptyChasche","obj","Object","keys","viewport","removeAttr","hasOwnProperty","updateViewportCss","resetViewportCss","inputs","selects","val","prop","styles","key","applyStyles","tools","hide","show","elemOver","element","elemLeave","options","createUniqueId","showEditor","getElementName","name_str","split","text","_is_option","loadTools","html","eq","getActiveTools","$data","options_array","push","filter","dataType","updateEditorMenu","addStyleTag","getStyles","getElemText","updateImageTool","Colorpicker","tools_types","inArray","resetEditorMenu","menu_links","head","style","document","createElement","indexOf","appendChild","elem_class","Date","getTime","controlls","that","tool","unit","value","createStyleObject","computeStyles","showObservedTools","styles_obj","sortStyleObject","sort_obj","pattern","sort","a","b","x","toLowerCase","y","stylesheet","selector","createStyleText","text_string","css","JSON","stringify","replace","getHTMLTag","getElemLink","getSiblingsViewports","sibling_styles","all_styles","extend","updateStylesSelects","updateStylesDimension","updateStyleInputs","split_valeus","val_array","grep","n","_is_match","dim_inputs","controll_val","all_inputs","observe","in_val","tool_name","extras","is_settings","includes","content_text","get","nodeValue","createTextLang","updateTextEditor","lang_tool","active_lang","lang_obj","updateTextLang","text_editor","text_object","trim","focus","node","nodeName","children","checkForEmptyText","media_tool","media_url","inner_html","new_html","getNodesAttr","replaceWith","html_tool","html_tag","tagName","name","nodes","attributes","specified","node_elem","node_text","insertLinkHTML","removeLinkHTML","link","href","className","prepend","html_html","getAttribute","setAttribute","removeAttribute","saveCss","console","log","saveElementText","showMediaGallery","selectMediaImage","applyImage","keyup","keyCode","closeMediaGallery","gallery","loadMediaImages","images","createMediaItem","grid_item","gallery_container","color_inputs","spectrum","input","showInput","preferredFormat","clickoutFiresChange","color","showButtons","move","change","elem_id","droppableElements","unFocusDroppableArea","dropElements","removeElement","duplicateElement","start","ui","item","stop","loadElement","element_url","appendElement","element_prototype","outerHTML","new_element","getElementIds","ids","createCloningStyles","new_id","elem_prop","applyCloningStyles"],"mappings":"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","file":"main.js","sourcesContent":["var pageBuilder = {\r\n    \r\n    init : function() {\r\n\r\n        $.event.addProp('dataTransfer');\r\n\r\n        $(window).resize(pageBuilder.resize);\r\n        pageBuilder.resize();\r\n        pageBuilder.bind();\r\n        pageBuilder.loadIframe();\r\n\r\n    }\r\n\r\n    /* Default Controllers */\r\n    ,initControllers : function(arg){\r\n    \r\n        Components.init();\r\n        Elements.init();\r\n        Editor.init();\r\n    }\r\n\r\n    /* Default Containers */\r\n    ,initContainers : function(){\r\n\r\n        var self = this;\r\n    \r\n        self.iframe = $('#builder-preview-iframe');\r\n\r\n        self.container = $('#builder-preview-iframe').contents().find('#pb-page-builder');\r\n        self.sidebar = $('#pb-page-builder-sidebar');\r\n        self.components = $('#pb-sidebar-components');\r\n        self.elements = $('#pb-sidebar-elements');\r\n        self.editor = $('#pb-sidebar-editor');\r\n        \r\n    }\r\n\r\n    ,bind : function() {\r\n\r\n        $('#pb-sidebar-main-menu a').on('click', pageBuilder.sidebarNav);\r\n            \r\n    }\r\n\r\n    ,resize : function() {\r\n\r\n        pageBuilder.viewport_height = $(window).height();\r\n        pageBuilder.viewport_width = $(window).width();\r\n\r\n        pageBuilder.mobile = navigator.userAgent.match(/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/i) || pageBuilder.viewport_width < 1024 ? true : false;\r\n\r\n    }\r\n\r\n    /* Check if element has data attribute */\r\n    ,check: function( el, param ) {\r\n        return typeof $( el ).attr( param ) !== 'undefined';\r\n    }\r\n\r\n    /* Hide Preloader */\r\n    ,hidePreloader : function(arg){\r\n    \r\n        $('#pb-iframe-preloader').fadeOut();\r\n        \r\n    }\r\n\r\n    /* Show Preloader */\r\n    ,showPreloader : function(arg){\r\n    \r\n        $('#pb-iframe-preloader').fadeIn();\r\n        \r\n    }\r\n\r\n    /* Load Iframe */\r\n    ,loadIframe : function(){\r\n    \r\n\r\n        if (typeof iframe_url !== 'undefined') {\r\n\r\n            var iframe = '<iframe id=\"builder-preview-iframe\" src=\"http://'+ iframe_url +'\" allowfullscreen=\"1\"></iframe>';\r\n\r\n            $('#gs-pb-iframe-holder').append(iframe);\r\n\r\n            $('#builder-preview-iframe').on('load', function(){\r\n\r\n                pageBuilder.hidePreloader();\r\n                pageBuilder.initContainers();\r\n                pageBuilder.initControllers();\r\n\r\n            })\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Sidebar Nav Change */\r\n    ,sidebarNav : function(e){\r\n\r\n        if (e) e.preventDefault();\r\n    \r\n        var self = $(this),\r\n            section = self.attr('href');\r\n\r\n        if (typeof section !== 'undefined' && !self.hasClass('active')) {\r\n\r\n            $('#' + section).addClass('active').siblings().removeClass('active');\r\n            self.addClass('active').siblings().removeClass('active');\r\n\r\n            if (Editor.elem !== null) {\r\n\r\n                Editor.elem = null;\r\n                pageBuilder.container.find('.pb-editing').removeClass('pb-editing');\r\n\r\n            }\r\n\r\n        }\r\n        \r\n    }\r\n\r\n};\r\n\r\n","var Components = {\r\n\r\n    component_id: null,\r\n\r\n\tinit : function(){\r\n\r\n        this.bind();\r\n        this.appendSection();\r\n        this.setUniqueId();\r\n        this.sortableComponents();\r\n        this.sortableContainers();\r\n        this.appendHelpers();\r\n\r\n\t}\r\n\r\n\t,bind : function() {\r\n\r\n        pageBuilder.components.on('dragstart','.pb-drop-handler', Components.appendDroppableArea);\r\n        pageBuilder.components.on('dragend','.pb-drop-handler', Components.removeDroppableArea);\r\n        pageBuilder.container.on('dragenter','.pb-droppable-area, .pb-new-section-inner', Components.focusDroppableArea);\r\n        pageBuilder.container.on('dragover','.pb-droppable-area, .pb-new-section-inner', Components.preventDragOver);\r\n        pageBuilder.container.on('drop','.pb-droppable-area, .pb-new-section-inner', Components.dropComponents);\r\n        pageBuilder.container.on('click','.pb-delete-widget', Components.removeWidget);\r\n\r\n\t}\r\n\r\n    ,sortableContainers  : function(){\r\n    \r\n        if (pageBuilder.container.length) {\r\n\r\n            pageBuilder.container.sortable({\r\n                handle: $(this).closest('.pb-sort-icon'),\r\n                cancel: '.pb-new-section-inner',\r\n                classes: {\r\n                    \"ui-sortable\": \"pb-sortable-item\"\r\n                }\r\n            }); \r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,setUniqueId : function(){\r\n    \r\n        var drag_handlers = pageBuilder.components.find('.pb-drop-handler');\r\n\r\n        if (drag_handlers.length) {\r\n\r\n            drag_handlers.each(function(i){\r\n\r\n                $(this).attr('id', 'pb-drag-handler-' + i);\r\n\r\n            })\r\n\r\n        }\r\n        \r\n    }\r\n\r\n\r\n\t/* Append droppble placeholders */\r\n    ,appendDroppableArea  : function(e){\r\n\r\n\r\n        e.dataTransfer.setData('html', e.target.id);\r\n\r\n    \r\n        var drop_area = '<div class=\"pb-droppable-area\"></div>',\r\n            widgets = pageBuilder.container.find('[data-widget]');\r\n\r\n        Components.component_id = $(this);\r\n\r\n        if (widgets.length) {\r\n\r\n            widgets.each(function(){\r\n\r\n              $(this).after($(drop_area))\r\n\r\n            })\r\n\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    /* Remove droppble placeholders */\r\n    ,removeDroppableArea  : function(e){\r\n        \r\n        var drop_area = pageBuilder.container.find('.pb-droppable-area'),\r\n            new_area = pageBuilder.container.find('.pb-new-section-inner');\r\n\r\n        setTimeout(function(){\r\n\r\n            if (drop_area.length) {\r\n\r\n                drop_area.remove();\r\n                new_area.removeClass('ready-to-drop');\r\n                Components.component_id = null;\r\n\r\n            }\r\n\r\n        }, 100)\r\n\r\n        \r\n    }\r\n\r\n    /* Focus droppble placeholders */\r\n    ,focusDroppableArea : function(e){\r\n\r\n        e.preventDefault(e);\r\n    \r\n        var self = $(this);\r\n\r\n        pageBuilder.container.find('.pb-new-section-inner').removeClass('ready-to-drop');\r\n        pageBuilder.container.find('.ready-to-drop').removeClass('ready-to-drop');\r\n        self.addClass('ready-to-drop');\r\n            \r\n        \r\n    }\r\n\r\n    /* Prevent default to allow drop */\r\n    ,preventDragOver : function(e){\r\n    \r\n        e.preventDefault();\r\n        \r\n    }\r\n\r\n    /* Set Draggble Components */\r\n    ,dropComponents : function(e){\r\n\r\n        e.preventDefault();\r\n\r\n        var data = e.dataTransfer.getData(\"html\", e.target),\r\n            target = $(this);\r\n\r\n        Components.loadComponent(data, target)\r\n \r\n        \r\n    }\r\n\r\n    /* Load master component */\r\n    ,loadComponent : function(data, target){\r\n    \r\n        var component = $('#' + data);\r\n            component_url = component.data('component');\r\n\r\n        if (typeof component_url !== 'undefined' && Components.component_id !== null) {\r\n\r\n            $.ajax({\r\n                    url: component_url,\r\n                    type: 'post',\r\n                    data: {},\r\n                    success: function (data) {\r\n\r\n                        Components.appendComponent(component, target, data)\r\n\r\n                    }\r\n                });\r\n\r\n        }\r\n    }\r\n\r\n    /* Append master component */\r\n    ,appendComponent : function(component, target, data){\r\n\r\n        if (target.hasClass('pb-droppable-area')) {\r\n    \r\n            if (component.length) {target.after(data);}\r\n\r\n        } \r\n\r\n        if(target.hasClass('pb-new-section-inner')){\r\n           \r\n            if (component.length) {Components.wrapWidgetToSection(target, data)}\r\n        }\r\n\r\n        Components.removeDroppableArea();\r\n        Components.sortableComponents(target);\r\n        Components.appendHelpers();\r\n\r\n        /* Append Helpers from Elements  */\r\n        Elements.appendElemHelpers();\r\n        Elements.appendColumnHelpers();\r\n\r\n        /* Reinit Sortable Elemets */\r\n        Elements.sortableElements();\r\n        Elements.sortableColumns();\r\n\r\n\r\n    }\r\n\r\n    /* Wrap component to section .gs-section*/\r\n    ,wrapWidgetToSection : function(target, data){\r\n    \r\n        var new_section_widget = '<div class=\"gs-section ui-sortable-handle\" data-sortable-container>'+\r\n                                    '<div class=\"gs-section-wrap\">'+ data +'</div>'+\r\n                                 '</div>';\r\n\r\n        target.before(new_section_widget).removeClass('ready-to-drop');\r\n        \r\n    }\r\n\r\n    /* Sortable Components */\r\n    ,sortableComponents : function(target){\r\n\r\n        var sortable = typeof target !== 'undefined' ? target : pageBuilder.container.find('[data-widget]');\r\n\r\n        if (pageBuilder.container !== null && typeof sortable !== 'undefined') {\r\n\r\n            sortable.parent().sortable({\r\n                handle: \".pb-sort-icon\",\r\n                classes: {\r\n                    \"ui-sortable\": \"pb-sortable-item\"\r\n                }\r\n            }); \r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Wrap widget in new section */\r\n    ,appendSection : function(){\r\n    \r\n        var section = '<div class=\"gs-section pb-new-section-inner\">'+\r\n                            '<div class=\"gs-section-wrap\">'+\r\n                                '<div class=\"pb-add-section\">'+\r\n                                    '<div class=\"pb-add-section-text\">'+\r\n                                        'Drag widget here'+\r\n                                    '</div>'+\r\n                                '</div>'+\r\n                            '</div>'+\r\n                       '</div>'\r\n\r\n        var last_section = pageBuilder.container.find('.gs-section').last();\r\n\r\n        last_section.after(section)\r\n        \r\n    }\r\n\r\n    /* Append widgets controlls */\r\n    ,appendHelpers : function(){\r\n        \r\n        var components = pageBuilder.container.find('[data-widget]');\r\n        var settings_element = '<div class=\"pb-editor-settings\">'+\r\n                                    '<div class=\"pb-editor-ui\">'+\r\n                                        '<span class=\"pb-ui-icon pb-delete-icon icon-close pb-delete-widget pb-delete-ui\" title=\"Remove\"></span>'+\r\n                                        '<span class=\"pb-ui-icon pb-widget-duplicate-icon icon-icon-file pb-duplicate-coll pb-duplicate-ui\" title=\"Copy\"></span>'+\r\n                                        '<span class=\"pb-ui-icon pb-sort-icon icon-star\"  title=\"Edit\"></span>'+\r\n                                    '</div>'+\r\n                                '</div>';\r\n\r\n        components.each(function(){\r\n\r\n            var self = $(this);\r\n\r\n            if (self.find('.pb-editor-settings').length == 0 && pageBuilder.check(self, 'data-widget')) {\r\n\r\n                self.append(settings_element);\r\n\r\n            }\r\n\r\n        })\r\n\r\n\r\n    }\r\n\r\n    /* Remove Element */\r\n    ,removeWidget : function(){\r\n\r\n        var self = $(this),\r\n            widget = self.parents('[data-widget]');\r\n\r\n        Components.resetEditedElem(widget);\r\n\r\n        if (widget.siblings().length > 0) {\r\n\r\n            widget.remove();\r\n\r\n        }else{\r\n\r\n            widget.parents('.gs-section').remove();\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,resetEditedElem : function(widget){\r\n    \r\n        if (Editor.elem !== null && widget.find('.pb-editing').length !== 0) {\r\n\r\n            Editor.elem = null;\r\n            $('#pb-components-btn').trigger('click');\r\n\r\n        }\r\n        \r\n    }\r\n}","var Editor = {\r\n\r\n\t/* Array for styles */\r\n    style_id: [],\r\n    chache_styles: header_chache_styles,\r\n\r\n    /* Deafult Settings */\r\n    settings:{\r\n        container:{ \r\n            default: ['width','border','dimensions','background','typography'],\r\n            main: ['width','border','dimensions', 'background','typography'],\r\n            inline: ['width','border','dimensions'],\r\n            grid: ['width', 'align-items-verical', 'align-items-horizontal', 'border','dimensions', 'background']\r\n        },\r\n        column: { \r\n            default: ['width','border','dimensions'],\r\n            grid: ['width','border','dimensions', 'background']\r\n        },\r\n        title: {\r\n            default: ['text-editor', 'change-title-tags', 'insert-link', 'typography', 'border', 'dimensions']\r\n        },\r\n        paragraph:{\r\n            default: ['text-editor','typography','size','border','dimensions'],\r\n            data_base : ['size','typography','border','dimensions']\r\n        },\r\n        image:{\r\n            default: ['media','width','height','border','dimensions', 'insert-link',],\r\n            grid: ['media','width','border','dimensions', 'insert-link',]\r\n        },\r\n        button:{\r\n            default: ['text-editor','typography', 'edit-link', 'size','border', 'dimensions', 'background']\r\n        }\r\n    },\r\n\r\n    /* Media queries breapoints */\r\n    media_settings: {\r\n        desktop: '',\r\n        tablet:'@media screen and (max-width: 1025px){',\r\n        mobile: '@media screen and (max-width: 640px){'\r\n    },\r\n\r\n    media_viewport: 'desktop', //default\r\n\r\n\t/* This is selected element */\r\n    elem: null,\r\n\r\n\tinit : function(){\r\n\r\n\t\tthis.bind();\r\n        Media.init();\r\n\r\n\t}\r\n\r\n\t,bind : function() {\r\n\r\n        /* Pagebulider container click listeners */\r\n        pageBuilder.container.on('click', '[data-editable]', Editor.focusEditble);\r\n        pageBuilder.container.on('click', Editor.unFocusEditble);\r\n\r\n        /* Form elements listeners for change and input */\r\n\t\tpageBuilder.editor.on('change','.pb-controlls-val', Editor.styleElem);\r\n        pageBuilder.editor.on('input change','.pb-ui-dim-input', Editor.collectDimensionValues);\r\n        pageBuilder.editor.on('input change','[data-tool=text-editor]', Editor.updateElementText);\r\n        pageBuilder.editor.on('input change','.pb-insert-link-val', Editor.insertLink);\r\n        pageBuilder.editor.on('input change','.pb-edit-link-val', Editor.editLink);\r\n        pageBuilder.editor.on('change','.pb-change-html-tag', Editor.changeHTMLTags);\r\n        pageBuilder.editor.on('change','.pb-link-attr-val', Editor.addLinkAttributes);\r\n\r\n        /* Pagebulider editor click listeners */\r\n        pageBuilder.editor.on('click','#pb-editor-menu a', Editor.showEditorMenuSection);\r\n        pageBuilder.editor.on('click','.pb-link-dimensions', Editor.observeDimensionValues);\r\n        pageBuilder.editor.on('click','.pb-lang-type span', Editor.changeInputLang);\r\n        pageBuilder.editor.on('click','.pb-show-observe-tool', Editor.showHiddenTools);\r\n\r\n        /* Screen resolution listeners */\r\n        $('#pb-iframe-size').on('click', 'button', Editor.changeViewport);\r\n\r\n\t}\r\n\r\n    ,isEmptyChasche : function(obj){\r\n    \r\n        return Object.keys(obj).length === 0;\r\n        \r\n    }\r\n\r\n    ,changeViewport : function(arg){\r\n    \r\n        var self = $(this),\r\n            viewport = self.data('viewport');\r\n\r\n        if (!self.hasClass('active')) {\r\n\r\n            self.addClass('active').siblings().removeClass('active');\r\n            pageBuilder.iframe.removeAttr('class').addClass(viewport);\r\n\r\n            Editor.media_viewport = viewport;\r\n\r\n            if (pageBuilder.container.find('.pb-editing').length !== 0 && Editor.chache_styles.hasOwnProperty(Editor.elem.attr('id'))) {\r\n\r\n                setTimeout(function(){\r\n                    Editor.updateViewportCss();\r\n                },50)\r\n                \r\n            }\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,resetViewportCss  : function(arg){\r\n    \r\n        var inputs = pageBuilder.sidebar.find('input.pb-controlls-val , input.pb-ui-dim-input'),\r\n            selects = pageBuilder.sidebar.find('select.pb-ui-handler-select');\r\n\r\n        inputs.val('');  \r\n        selects.prop('selectedIndex', 0);  \r\n    }\r\n\r\n    ,updateViewportCss  : function(arg){\r\n\r\n        var chache_styles = Editor.chache_styles[Editor.elem.attr('id')].styles;\r\n\r\n        if (typeof chache_styles !=='undefined' && chache_styles.hasOwnProperty(Editor.media_viewport)) {\r\n\r\n            Editor.resetViewportCss();\r\n\r\n            $.each(chache_styles[Editor.media_viewport], function(key, val){\r\n\r\n                Editor.applyStyles(key, val);\r\n\r\n            })\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    /* Showing editor tabs */\r\n\t,showEditorMenuSection  : function(e){\r\n\r\n\t\tif(e) e.preventDefault();\r\n\t\r\n\t\tvar self = $(this);\r\n\t\t\ttype = self.data('tool-type'),\r\n            tools = pageBuilder.editor.find('[data-type]'),\r\n            target = pageBuilder.editor.find('[data-type='+type+']');\r\n\r\n\t\tif (!self.hasClass('active')) {\r\n\r\n            tools.hide()\r\n\t\t\tself.addClass('active').siblings().removeClass('active');\r\n\t\t\ttarget.show();\r\n            $('#pb-sidebar-main-menu .pb-main-nav-link').removeClass('active');\r\n\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n    /* Element on mouseover */\r\n\t,elemOver : function(e){\r\n\r\n        var self = $(e.target),\r\n            element = pageBuilder.check(self, 'data-editable') ? self : self.closest('[data-editable]')\r\n\r\n        $('[data-editable]').removeClass('focus');\r\n        element.addClass('focus');\r\n        \r\n    }\r\n\r\n    /* Element on mouseleave */\r\n    ,elemLeave : function(e){\r\n\r\n        $(this).removeClass('focus');\r\n        \r\n    }\r\n\r\n    /* Selecting element for editing */\r\n    ,focusEditble : function(e){\r\n\r\n        if(e) e.preventDefault();\r\n    \r\n        var self = $(e.target);\r\n\r\n        if (!self.hasClass('pb-delete-ui') && !self.hasClass('pb-duplicate-ui')) {\r\n\r\n            var element = pageBuilder.check(self, 'data-editable') ? self : self.closest('[data-editable]');\r\n                options = element.attr('data-editable');\r\n\r\n            Editor.createUniqueId(element);\r\n\r\n            if (!element.hasClass('pb-editing') && pageBuilder.check(element, 'data-editable')) {\r\n\r\n                pageBuilder.container.find('[data-editable]').removeClass('pb-editing');\r\n                element.addClass('pb-editing');\r\n\r\n                Editor.showEditor(self, element, options);\r\n                Editor.getElementName(self);\r\n\r\n            }\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    ,unFocusEditble : function(e){\r\n    \r\n        var self = $(e.target),\r\n            element = pageBuilder.check(self, 'data-editable') ? self : self.closest('[data-editable]');\r\n\r\n\r\n        if (element.length == 0) {\r\n\r\n            pageBuilder.container.find('[data-editable]').removeClass('pb-editing');\r\n            Editor.elem = null;\r\n            $('#pb-components-btn').trigger('click');\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,getElementName : function(self){\r\n    \r\n        var data_name = pageBuilder.check(self, 'data-editable') ? self.data('editable') : self.closest('[data-editable]').data('editable'),\r\n            name_str = data_name.split('.');\r\n\r\n        $('#pb-edited-elem-name').text(name_str[0]);\r\n        \r\n    }\r\n\r\n    /* Show editor */\r\n    ,showEditor : function(self, element, options){\r\n\r\n        if (typeof options !== 'undefined') {\r\n\r\n            var _is_option = options.split('.');\r\n\r\n            if (Editor.settings[_is_option[0]].hasOwnProperty(_is_option[1])) {\r\n\r\n                pageBuilder.editor.addClass('active').siblings().removeClass('active');\r\n                Editor.loadTools(self, element, options);\r\n\r\n            }else{\r\n\r\n                pageBuilder.editor.find('.pb-editor-form').html('');\r\n                $('#pb-sidebar-main-menu a').eq(0).trigger('click');\r\n\r\n            }\r\n\r\n        }\r\n    \t\r\n    }\r\n\r\n    /* Get tools from selected element */\r\n    ,getActiveTools : function(self, options, $data){\r\n    \r\n        var elem = self,\r\n            settings = options.split('.'),\r\n            options_array = Editor.settings[settings[0]][settings[1]],\r\n            tools = [];\r\n\r\n        if (typeof options_array !== 'undefined') {\r\n\r\n            for (var i = 0; i < options_array.length; i++) {\r\n\r\n                tools.push($data.filter('[data-edit='+ options_array[i] +']'));\r\n\r\n            }\r\n\r\n            return tools\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Load Tools for selected element */\r\n    ,loadTools : function(self, element, options){\r\n\r\n        if (typeof self !== 'undefined' && typeof options !== 'undefined') {\r\n\r\n        \t$.ajax({\r\n        \t\t\turl: 'ajax/tools/tools.php',\r\n        \t\t\ttype: 'post',\r\n        \t\t\tdata: {},\r\n        \t\t\tdataType: 'html',\r\n        \t\t\tsuccess: function (data) {\r\n\r\n\r\n        \t\t\t\tif (data) {\r\n\r\n                            var $data = $(data);\r\n\r\n                            pageBuilder.editor.find('.pb-editor-form').html(Editor.getActiveTools(self, options, $data))\r\n\r\n                            Editor.elem = element;\r\n\r\n                            Editor.updateEditorMenu();\r\n                            Editor.addStyleTag(Editor.elem.attr('id'));\r\n\r\n                            Editor.getStyles();\r\n                            Editor.getElemText(Editor.elem);\r\n                            Editor.updateImageTool();\r\n                            Colorpicker.init($data);\r\n\r\n        \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t});\r\n\r\n        }\r\n    \t\r\n    }\r\n\r\n    /* Get active tools for selected element */\r\n    ,updateEditorMenu : function(){\r\n        \r\n        var tools = pageBuilder.editor.find('.pb-edit-tool'),\r\n            tools_types = [];\r\n\r\n        tools.each(function(){\r\n\r\n            var type = $(this).data('type');\r\n\r\n            if($.inArray(type, tools_types) === -1) tools_types.push(type);\r\n\r\n        })\r\n\r\n       Editor.resetEditorMenu(tools_types);\r\n        \r\n    }\r\n\r\n    /* Reseting menu tabs */\r\n    ,resetEditorMenu : function(tools_types){\r\n    \r\n        var menu_links = $('#pb-editor-menu a');\r\n\r\n        menu_links.hide().removeClass('active');\r\n\r\n        for (var i = 0; i < tools_types.length; i++) {\r\n\r\n            menu_links.filter('[data-tool-type='+tools_types[i]+']').show();\r\n\r\n        }\r\n\r\n        menu_links.filter(':visible:first').trigger('click');\r\n        \r\n    }\r\n\r\n    /* Creating unique style for element */\r\n    ,addStyleTag : function(id){\r\n    \r\n    \tvar head = pageBuilder.iframe.contents().find('head')[0],\r\n    \t\tstyle = document.createElement('style'),\r\n    \t\tstyle_id = 'pb-style-' + id;\r\n\r\n    \t\tstyle.type = 'text/css';\r\n    \t\tstyle.id = style_id;\r\n\r\n    \tif (Editor.style_id.indexOf(style_id) === -1) {\r\n\r\n    \t\tEditor.style_id.push(style_id);\r\n    \t\thead.appendChild(style);\r\n\r\n    \t}\r\n    \t\r\n    }\r\n\r\n    /* Adds unique id on selected element */\r\n    ,createUniqueId : function(self){\r\n\r\n        var elem_class =  typeof self.attr('class') !== 'undefined' ? self.attr('class') : 'pb-element',\r\n            elem_id = self.prop('id');\r\n\r\n\r\n        if (!elem_id) {\r\n            self.prop('id', elem_class.split(/\\s(.+)/)[0] + '-' + (new Date()).getTime())\r\n        }\r\n    \r\n        \r\n        \r\n    }\r\n\r\n    /* Styling selected element in real time from fields */\r\n    ,styleElem : function(elem){\r\n    \r\n        var controlls = pageBuilder.editor.find('.pb-controlls-val'),\r\n            viewport = Editor.media_viewport;\r\n\r\n        if (Editor.elem != null) {\r\n\r\n           \tfor (var i = 0; i < controlls.length; i++) {    \r\n\r\n           \t\tif ($(controlls[i]).val() !== '') {\r\n\r\n           \t\t\tvar that = $(controlls[i]),\r\n                        tool = that.attr('data-tool'),\r\n                        unit = pageBuilder.check(that, 'data-unit') ? that.attr('data-unit') : '',\r\n                        value = that.val();\r\n\r\n                    if (Editor.chache_styles.hasOwnProperty(Editor.elem.attr('id')) ) {\r\n\r\n                        Editor.chache_styles[Editor.elem.attr('id')]['styles'] = Editor.createStyleObject(tool, value, unit);\r\n\r\n                    }else{\r\n                        \r\n                        Editor.chache_styles[Editor.elem.attr('id')] = {};\r\n                        Editor.chache_styles[Editor.elem.attr('id')]['styles'] = Editor.createStyleObject(tool, value, unit);\r\n\r\n                    }\r\n\r\n           \t\t}\r\n\r\n           \t}\r\n\r\n            Editor.computeStyles();\r\n            Editor.showObservedTools($(this));\r\n\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    /* Creating style object with viewport keys */\r\n    ,createStyleObject  : function(tool, value, unit){\r\n    \r\n        var element = Editor.chache_styles[Editor.elem.attr('id')],\r\n            viewport = Editor.media_viewport,\r\n            styles_obj = {};\r\n\r\n        if (typeof element !== 'undefined' && element.hasOwnProperty('styles')) {\r\n\r\n            styles_obj = element.styles;\r\n\r\n            if (styles_obj.hasOwnProperty(viewport)) {\r\n\r\n                styles_obj[viewport][tool] = value + '' + unit + ';';\r\n\r\n            }else{\r\n    \r\n                styles_obj[viewport] = {};\r\n\r\n                styles_obj[viewport][tool] = value + '' + unit + ';';\r\n\r\n            }\r\n\r\n        }else{\r\n    \r\n            styles_obj[viewport] = {};\r\n    \r\n            styles_obj[viewport][tool] = value + '' + unit + ';';\r\n\r\n        }\r\n\r\n        return Editor.sortStyleObject(styles_obj);\r\n        \r\n    }\r\n\r\n    ,sortStyleObject : function(obj){\r\n    \r\n        var sortable = [],\r\n            sort_obj = {},\r\n            pattern = Object.keys(Editor.media_settings);\r\n\r\n        for(var key in obj){\r\n\r\n            if(obj.hasOwnProperty(key)){\r\n                sortable.push([key, obj[key]]);\r\n            }\r\n        \r\n            sortable.sort(function(a, b){\r\n\r\n                var x = a[0].toLowerCase(),\r\n                    y = b[0].toLowerCase();\r\n\r\n                return pattern.indexOf(x) - pattern.indexOf(y);\r\n\r\n            });\r\n\r\n        }\r\n\r\n        for (var i = 0; i < sortable.length; i++) {\r\n            sort_obj[sortable[i][0]] = sortable[i][1];\r\n        }\r\n        \r\n        return sort_obj;\r\n            \r\n    }\r\n\r\n    /* Direct typing in style attr */\r\n    ,computeStyles : function(prop, val, unit){\r\n\r\n    \tvar stylesheet = pageBuilder.iframe.contents().find('#pb-style-' + Editor.elem.attr('id')),\r\n    \t\tchache_styles = Editor.chache_styles[Editor.elem.attr('id')].styles;\r\n\r\n\r\n    \tif (Editor.elem !== null && stylesheet.length && typeof chache_styles !== 'undefined') {\r\n\r\n    \t\tvar\tselector = '#pb-page-builder #' + Editor.elem.attr('id');\r\n\r\n    \t\tstylesheet.text(Editor.createStyleText(selector, chache_styles))\r\n\r\n    \t}\r\n    \t\r\n    }\r\n\r\n    ,createStyleText : function(selector, styles){\r\n        \r\n\r\n        var text_string = '';\r\n\r\n        $.each(styles, function(key, val){\r\n\r\n            var value = typeof val !== 'undefined' ? JSON.stringify(val).replace(/['\",]+/g, '') : '', css;\r\n\r\n            if (key == 'desktop') {\r\n                css = value;\r\n            }else{\r\n                css = value + '}';\r\n            }\r\n\r\n            text_string += Editor.media_settings[key] + selector + '' + css;\r\n\r\n        })\r\n\r\n\r\n        return text_string;\r\n        \r\n    }\r\n\r\n    /* Get styles from selected element */\r\n    ,getStyles : function(){\r\n\r\n        Editor.getHTMLTag();\r\n        Editor.getElemLink();\r\n\r\n        if (Editor.chache_styles.hasOwnProperty(Editor.elem.attr('id'))) {\r\n\r\n            var elem = Editor.chache_styles[Editor.elem.attr('id')];\r\n\r\n            if (elem.hasOwnProperty('styles')) {\r\n\r\n                var styles = typeof elem.styles[Editor.media_viewport] !== 'undefined' ? elem.styles[Editor.media_viewport] : Editor.getSiblingsViewports(elem);\r\n\r\n                $.each(styles, function(key, val){\r\n                    Editor.applyStyles(key, val);\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /* Get styles from siblings viewport */\r\n    ,getSiblingsViewports : function(elem){\r\n    \r\n        var all_styles = elem.styles, sibling_styles;\r\n\r\n        if (!all_styles.hasOwnProperty(Editor.media_viewport)) {\r\n\r\n            switch(Editor.media_viewport) {\r\n                case 'desktop':\r\n                    break;\r\n                case 'tablet':\r\n                    sibling_styles = $.extend(true,{}, all_styles.desktop);\r\n                    break;\r\n                case 'mobile':\r\n                    sibling_styles = typeof all_styles.tablet !== 'undefined' ? $.extend(true,{}, all_styles.tablet) : $.extend(true,{}, all_styles.desktop);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n        return sibling_styles\r\n        \r\n    }\r\n\r\n    /* Aplly styles form selected element into editor */\r\n    ,applyStyles : function(key, val){\r\n\r\n        if (typeof key !== 'undefined' && typeof val !== 'undefined') {\r\n\r\n            var tool = pageBuilder.editor.find('.pb-controlls-val[data-tool='+ key +']');\r\n\r\n            if (tool.length) {\r\n\r\n                if (tool.hasClass('pb-ui-handler-select')) {\r\n                    Editor.updateStylesSelects(tool, val); return            \r\n                }\r\n\r\n                if (tool.hasClass('pb-controll-dimensions-val')) {\r\n                    Editor.updateStylesDimension(tool, val); return            \r\n                }\r\n\r\n                Editor.updateStyleInputs(tool, val);\r\n\r\n            }\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Update onClick input tools */\r\n    ,updateStyleInputs : function(tool, val){\r\n    \r\n        var value = val.replace(/[&\\/\\\\px,;+()$~%.'\":*?<>{}]/g, '');\r\n\r\n        tool.val(value).trigger('change');\r\n        \r\n    }\r\n\r\n    /* Update onClick select tools */\r\n    ,updateStylesSelects : function(tool, val){\r\n\r\n\r\n        var value = val.replace(/\\;/g, ''),\r\n            option = tool.find('option').filter(function(){ return this.value == value });\r\n\r\n        option.prop('selected', true).trigger('change');\r\n        \r\n    }\r\n\r\n    /* Update onClick dimension inputs */\r\n    ,updateStylesDimension : function(tool, val){\r\n    \r\n        var value = val.replace(/\\;/g, ''),\r\n            split_valeus = value.split(' '),\r\n            val_array = $.grep(split_valeus,function(n){ return n == 0 || n }),\r\n            inputs = tool.parent().find('.pb-controll-dimensions');\r\n\r\n        for (var i = 0; i < val_array.length; i++) {\r\n\r\n            var _is_val = val_array[i],\r\n                _is_match = _is_val.replace(/[^0-9]/g,'');\r\n\r\n            inputs.eq(i).find('.pb-ui-dim-input').val(_is_match);\r\n            \r\n        }\r\n\r\n        tool.val(value).trigger('change');\r\n        \r\n    }\r\n\r\n    /* Dimension inputs live change */\r\n    ,collectDimensionValues : function(){\r\n    \r\n        var self = $(this),\r\n            container = self.parents('.pb-ui-dimensions'),\r\n            dim_inputs = self.parent().siblings().find('input.pb-ui-dim-input'),\r\n            controll_val = container.find('.pb-controlls-val'),\r\n            all_inputs = container.find('input.pb-ui-dim-input'),\r\n            observe = container.find('.pb-link-dimensions').hasClass('active'),\r\n            value = '';\r\n\r\n        if (observe) {\r\n            dim_inputs.val(self.val());\r\n        }\r\n\r\n        all_inputs.each(function(){\r\n\r\n            var in_val = $(this).val().length > 0 ? $(this).val() : '0';\r\n\r\n            value += in_val + 'px ';\r\n\r\n        })\r\n\r\n        controll_val.val(value).trigger('change');\r\n\r\n        \r\n    }\r\n\r\n    /* Switch on and off observable of dimesion inputs */\r\n    ,observeDimensionValues : function(e){\r\n    \r\n        e.preventDefault();\r\n\r\n        var self = $(this),\r\n            container = self.parents('.pb-ui-dimensions');\r\n\r\n        if (!self.hasClass('active')) {\r\n            self.addClass('active');\r\n            container.addClass('active');\r\n        }else{\r\n            self.removeClass('active');\r\n            container.removeClass('active');\r\n        }\r\n        \r\n    }\r\n\r\n    /* Show if tool has hidden options */\r\n    ,showObservedTools  : function(tool){\r\n    \r\n        var tool_name = tool.attr('data-tool'),\r\n            extras = pageBuilder.editor.find('[data-observe-tool=' + tool_name + ']'),\r\n            default_props = ['none','default','inherit','auto'];\r\n\r\n        if (typeof extras !== 'undefined') {\r\n\r\n            if (tool.val().length > 0 && default_props.indexOf(tool.val()) < 0) {\r\n                extras.show()\r\n            }else{\r\n                extras.hide() \r\n            }\r\n        \r\n        }\r\n        \r\n    }\r\n\r\n    /* Show if tool has hidden tools */\r\n    ,showHiddenTools  : function(tool){\r\n    \r\n        var self = $(this),\r\n            tool_name = self.data('show-observe-tool'),\r\n            extras = pageBuilder.editor.find('[data-observe-tool=' + tool_name + ']');\r\n\r\n        if (typeof extras !== 'undefined') {\r\n\r\n            if (!self.hasClass('active')) {\r\n                self.addClass('active');\r\n                extras.show()\r\n            }else{\r\n                self.removeClass('active');\r\n                extras.hide() \r\n            }\r\n        \r\n        }\r\n        \r\n    }\r\n\r\n    /* If element has text editor option */\r\n    ,getElemText : function(self){\r\n\r\n        var is_settings = self.data('editable');\r\n\r\n        if (typeof is_settings !== 'undefined' && is_settings.length > 0) {\r\n\r\n            var settings = is_settings.split('.');\r\n\r\n            if(Editor.settings[settings[0]][settings[1]].includes('text-editor')){\r\n\r\n                var content_text = typeof self.contents().get(0).nodeValue == 'string' ? self.contents().get(0).nodeValue : self.contents().get(0).text;\r\n\r\n                if (content_text.length > 0){\r\n\r\n                    if (Editor.chache_styles.hasOwnProperty(Editor.elem.attr('id')) ) {\r\n\r\n                        Editor.chache_styles[Editor.elem.attr('id')]['text'] = Editor.createTextLang(content_text);\r\n\r\n                    }else{\r\n\r\n                        Editor.chache_styles[Editor.elem.attr('id')] = {'text': Editor.createTextLang(content_text)};\r\n\r\n                    }\r\n\r\n                    Editor.updateTextEditor();\r\n\r\n                }\r\n\r\n            }   \r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Get active language */\r\n    ,createTextLang : function(content_text){\r\n    \r\n        var lang_tool = pageBuilder.editor.find('#pb-lang-type'),\r\n            element = Editor.chache_styles[Editor.elem.attr('id')];\r\n\r\n        if (lang_tool.length) {\r\n\r\n            var active_lang = lang_tool.find('span.active').data('lang');\r\n\r\n            if (typeof element !== 'undefined' && element.hasOwnProperty('text')) {\r\n\r\n                var lang_obj = element.text;\r\n\r\n            }else{\r\n\r\n                var lang_obj = {};\r\n\r\n                lang_obj[active_lang] = content_text;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return lang_obj\r\n        \r\n    }\r\n\r\n    ,updateTextLang : function(content_text){\r\n    \r\n        var lang_tool = pageBuilder.editor.find('#pb-lang-type'),\r\n            element = Editor.chache_styles[Editor.elem.attr('id')];\r\n\r\n        if (lang_tool.length) {\r\n\r\n            var active_lang = lang_tool.find('span.active').data('lang');\r\n\r\n            if (typeof element !== 'undefined' && element.hasOwnProperty('text')) {\r\n\r\n                var lang_obj = element.text;\r\n\r\n                lang_obj[active_lang] = content_text;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return lang_obj\r\n        \r\n    }\r\n\r\n    /* Update text editor from Editor.chache_styles object */\r\n    ,updateTextEditor : function(){\r\n    \r\n        var text_editor = pageBuilder.editor.find('[data-tool=text-editor]'),\r\n            element = Editor.chache_styles[Editor.elem.attr('id')],\r\n            lang_tool = pageBuilder.editor.find('#pb-lang-type');\r\n\r\n        if (typeof element !== 'undefined' && element.hasOwnProperty('text')) {\r\n\r\n            var text_object = element.text,\r\n                active_lang = lang_tool.find('span.active').data('lang'),\r\n                text_string = typeof text_object[active_lang] !== 'undefined' ? text_object[active_lang].trim() : '';\r\n\r\n                text_editor.val(text_string);\r\n\r\n                if (text_editor.val().length > 0) {\r\n                    text_editor.trigger('change').attr(\"placeholder\", \"Type text here ...\");\r\n\r\n                }\r\n\r\n                setTimeout(function(){text_editor.focus()},50)\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Update text editor from Editor.chache_styles object */\r\n    ,updateElementText : function(){\r\n    \r\n        var text_editor = pageBuilder.editor.find('[data-tool=text-editor]');\r\n\r\n        if(Editor.elem !== null){\r\n\r\n            var text = Editor.elem.contents().get(0).nodeValue,\r\n                node = Editor.elem.contents().get(0).nodeName;\r\n\r\n            if (typeof text == 'string' && node == '#text'){\r\n\r\n                Editor.elem.contents().get(0).nodeValue = text_editor.val();\r\n\r\n            }else{\r\n\r\n                Editor.elem.children().eq(0).text(text_editor.val());\r\n\r\n            }\r\n\r\n            Editor.chache_styles[Editor.elem.attr('id')]['text'] = Editor.updateTextLang(text_editor.val());\r\n\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    /* Check if textNode is only spaces or tabs */\r\n    ,checkForEmptyText : function(text){\r\n\r\n        if (typeof text !== null && typeof text !== 'undefined' && text) {\r\n\r\n            var string = text.replace(/\\s/g, '');\r\n\r\n            return string;\r\n\r\n        }else{\r\n\r\n            return false;\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Change active language in the text editor */\r\n    ,changeInputLang : function(arg){\r\n    \r\n        var self = $(this),\r\n            text_editor = pageBuilder.editor.find('[data-tool=text-editor]');\r\n\r\n        if (!self.hasClass('active')) {\r\n\r\n            self.addClass('active').siblings().removeClass('active');\r\n            text_editor.focus();\r\n            Editor.updateTextEditor();\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Show element image in sidebar image-tool */\r\n    ,updateImageTool : function(){\r\n    \r\n        var media_tool = pageBuilder.editor.find('[data-media-preview]'),\r\n            media_url = Editor.elem.find('[data-placeholder-image]').attr('src');\r\n\r\n        if (typeof media_url !== 'undefined' && media_tool.length && media_url.indexOf('placeholder') == -1) {\r\n\r\n            media_tool.css('background-image', 'url(' + media_url + ')');\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Change HTML of element */\r\n    ,changeHTMLTags : function(){\r\n        \r\n        var self = $(this),\r\n            value = self.val(),\r\n            elem = pageBuilder.container.find('.pb-editing'),\r\n            inner_html = elem.html(),\r\n            nodes = Editor.getNodesAttr(elem);\r\n\r\n        var new_html = '<'+ value + ' '+ nodes +'>' +inner_html+ '</'+ value +'>';\r\n\r\n        elem.replaceWith(new_html);\r\n\r\n        pageBuilder.container.find('.pb-editing').removeClass('pb-editing').trigger('click');\r\n        \r\n    }\r\n\r\n    /* Get element HTML tag */\r\n    ,getHTMLTag : function(){\r\n\r\n        var html_tool = pageBuilder.editor.find('.pb-change-html-tag')\r\n    \r\n        if (html_tool.length !== 0) {\r\n\r\n            var html_tag = Editor.elem[0].tagName;\r\n\r\n            if (typeof html_tag !== 'undefined') {\r\n                html_tool.val(html_tag);\r\n            }\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Get all attributes from element */\r\n    ,getNodesAttr : function(elem){\r\n\r\n        var nodes = '', name, attr;\r\n    \r\n        elem.each(function() {\r\n            $.each(this.attributes, function() {\r\n\r\n                if(this.specified) {\r\n\r\n                    name = this.name;\r\n                    attr = this.nodeValue;\r\n\r\n                    nodes += name + '=\"' + attr + '\" ';\r\n\r\n                }\r\n\r\n            });\r\n        });\r\n\r\n        return nodes;\r\n        \r\n    }\r\n\r\n    /* Adding or editing link in element */\r\n    ,insertLink : function(arg){\r\n    \r\n        var self = $(this),\r\n            val = self.val(),\r\n            node_text = Editor.elem.contents().get(0).nodeValue,\r\n            node_elem;\r\n\r\n        if (val.length > 0) {\r\n\r\n            if (Editor.elem.find('.pb-dynamic-link').length) {\r\n\r\n                Editor.elem.find('.pb-dynamic-link').attr('href', val);\r\n\r\n                return;\r\n\r\n            }\r\n\r\n            if (Editor.checkForEmptyText(node_text).length) {\r\n\r\n                Editor.insertLinkHTML(val, node_text, node_elem); \r\n\r\n            }else{\r\n\r\n                node_elem = Editor.elem.children().eq(0);\r\n\r\n                Editor.insertLinkHTML(val, node_text, node_elem);  \r\n\r\n            }\r\n\r\n\r\n        }else{\r\n\r\n            Editor.removeLinkHTML();\r\n\r\n        }\r\n    \r\n    }\r\n\r\n    /* Creating link HTML and appending to element */\r\n    ,insertLinkHTML : function(val, node_text, node_elem){\r\n\r\n\r\n        var link = document.createElement('a');\r\n\r\n        link.href = val;\r\n        link.text = node_text;\r\n        link.className = 'pb-dynamic-link';\r\n\r\n        if (typeof node_elem !== 'undefined'){\r\n\r\n            link.appendChild(node_elem[0])\r\n\r\n        }\r\n\r\n        Editor.elem.contents().get(0).remove();\r\n        Editor.elem.prepend(link);\r\n\r\n        \r\n    }\r\n\r\n    /* Remove appended link HTML */\r\n    ,removeLinkHTML : function(){\r\n    \r\n        var link = Editor.elem.find('.pb-dynamic-link');\r\n\r\n        if (link.length) {\r\n\r\n            var html_html = link.html();\r\n\r\n            link.replaceWith(html_html); \r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Get link href attribute */\r\n    ,getElemLink : function(){\r\n\r\n        var elem = Editor.elem[0].tagName == 'A' ? Editor.elem[0] : Editor.elem.contents().get(0);\r\n   \r\n        if (elem.tagName == 'A') {\r\n\r\n            pageBuilder.editor.find('.pb-ui-handler-link').val(elem.getAttribute(\"href\"));\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Editing href attribute only if Editor.elem has a href attribute */\r\n    ,editLink : function(){\r\n    \r\n        var self = $(this),\r\n            val = self.val();\r\n\r\n        if (Editor.elem.attr('href') !== 'undefined') {\r\n\r\n            Editor.elem.attr('href', val); \r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Adding attributes to link target=\"_blank\" or rel=\"nofollow\" */\r\n    ,addLinkAttributes : function(){\r\n    \r\n        var self = $(this),\r\n            attr = self.data('link-attr').split(':'),\r\n            elem = Editor.elem[0].tagName == 'A' ? Editor.elem[0] : Editor.elem.contents().get(0);\r\n\r\n        if (self.prop('checked') && elem.tagName == 'A') {\r\n\r\n            elem.setAttribute(attr[0], attr[1]);\r\n\r\n        }else if(!self.prop('checked') && elem.tagName == 'A'){\r\n\r\n            elem.removeAttribute(attr[0]);\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Send all styles to server */\r\n    ,saveCss : function(){\r\n    \r\n    \tvar styles = $('head').find('[id^=pb-style]');\r\n\r\n    \tstyles.each(function(){\r\n\r\n    \t\tconsole.log(styles.text());\r\n\r\n    \t})\r\n    \t\r\n    }\r\n\r\n    ,saveElementText  : function(){\r\n\r\n        $.each(Editor.chache_styles, function(key, val){\r\n\r\n            console.log(key, val.text);\r\n\r\n        })\r\n        \r\n    }\r\n}\r\n\r\nvar Media = {\r\n\r\n    container: $('#pb-media-container'),\r\n\r\n    init : function(){\r\n    \r\n        this.bind();\r\n        \r\n    }\r\n\r\n    ,bind  : function(){\r\n    \r\n        pageBuilder.sidebar.on('click','.pb-ui-media-tool', Media.showMediaGallery);\r\n\r\n        Media.container.on('click','.pb-media-item', Media.selectMediaImage);\r\n        Media.container.on('dblclick','.pb-media-item', Media.applyImage);\r\n        Media.container.on('click','#gs-pb-add-image', Media.applyImage);\r\n\r\n        $(document).keyup(function(e) {\r\n            if (e.keyCode == 27) {\r\n                Media.closeMediaGallery(); \r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    /* Show Media Gallery*/\r\n    ,showMediaGallery : function(){\r\n        \r\n        var self = $(this),\r\n            gallery = $('#pb-media-container');\r\n\r\n        if (!gallery.hasClass('active')) {\r\n\r\n            gallery.addClass('active');\r\n\r\n            if (gallery.find('.pb-media-item').length == 0) {\r\n                Media.loadMediaImages(self);\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    ,closeMediaGallery  : function(e){\r\n\r\n        if (e) e.preventDefault();\r\n    \r\n        var gallery = $('#pb-media-container');\r\n\r\n        if (gallery.hasClass('active')) {\r\n            gallery.removeClass('active');\r\n            Media.container.find('.pb-media-item').removeClass('active');\r\n        }\r\n        \r\n    }\r\n\r\n    /* Load Media Images  */\r\n    ,loadMediaImages  : function(self){\r\n    \r\n        var media_url = 'ajax/media.json';\r\n\r\n        $.ajax({\r\n                url: media_url,\r\n                type: 'post',\r\n                dataType: 'json',\r\n                data: {},\r\n                success: function (data) {\r\n\r\n                    if (data.images.length !== 0) {\r\n\r\n                        Media.createMediaItem(data.images);\r\n\r\n                    }\r\n\r\n                }\r\n            });\r\n        \r\n    }\r\n\r\n    /* Create Media Grid */\r\n    ,createMediaItem : function(data){\r\n\r\n        var gallery_container = $('#pb-media-container .pb-media-grid'), grid_item;\r\n\r\n        if (gallery_container.children().length == 0) {}\r\n\r\n        for (var i = 0; i < data.length; i++) {\r\n\r\n            grid_item = '<div class=\"pb-media-item\" data-media-image=\"'+ data[i] +'\">'+\r\n                            '<div class=\"pb-media-image\">'+\r\n                                '<div class=\"pb-background\" style=\"background-image: url('+ data[i] +');\"></div>'+\r\n                            '</div>'+\r\n                        '</div>';\r\n\r\n            gallery_container.append(grid_item);\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Selecting Media Image */\r\n    ,selectMediaImage : function(){\r\n    \r\n        var self = $(this),\r\n            button = $('#gs-pb-add-image');\r\n\r\n        if (!self.hasClass('active')) {\r\n\r\n            self.addClass('active').siblings().removeClass('active');\r\n            button.addClass('active');\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,applyImage : function(e){\r\n        \r\n        if (e) e.preventDefault();    \r\n        \r\n        var self = $(this),\r\n            media_url = Media.container.find('.pb-media-item.active').data('media-image'),\r\n            media_tool = pageBuilder.sidebar.find('[data-media-preview]');\r\n\r\n        if (self.hasClass('active') && Editor.elem !== null && typeof media_url !== 'undefined') {\r\n\r\n            Editor.elem.find('[data-placeholder-image]').attr('src',media_url);\r\n            media_tool.css('background-image', 'url(' + media_url + ')');\r\n            Media.closeMediaGallery();\r\n\r\n        }\r\n        \r\n    }\r\n\r\n}\r\n\r\nvar Colorpicker = {\r\n\r\n    init : function($data){\r\n\r\n        var color_inputs = $data.find('[data-colorpicker]');\r\n\r\n        if (color_inputs.length) {\r\n\r\n            this.spectrum(color_inputs);\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,spectrum : function(color_inputs){\r\n\r\n        if ($('.sp-container').length) {\r\n            $('.sp-container').remove();\r\n        }\r\n\r\n        color_inputs.parent().each(function(){\r\n\r\n            var self = $(this),\r\n                input = self.find('input');\r\n\r\n            self.spectrum({\r\n                showInput: true,\r\n                preferredFormat: \"hex3\",\r\n                clickoutFiresChange: true,\r\n                color: input.val(),\r\n                showButtons: false,\r\n                move: function(color) {\r\n                    input.val(color).trigger('change');\r\n                },\r\n                change: function(color) {\r\n                    input.val(color).trigger('change');\r\n                }\r\n            });\r\n\r\n        })\r\n        \r\n    }\r\n\r\n}","var Elements = {\r\n\r\n    elem_id : null,\r\n\r\n\tinit : function(){\r\n\r\n        this.appendElemHelpers();\r\n        this.appendColumnHelpers();\r\n        this.sortableElements();\r\n        this.sortableColumns();\r\n        this.setUniqueId();\r\n\t\tthis.bind();\r\n\t\t\r\n\t}\r\n\r\n\t,bind : function() {\r\n\r\n        pageBuilder.elements.on('dragstart','[data-draggble-element]', Elements.droppableElements);\r\n        pageBuilder.elements.on('dragend','[data-draggble-element]', Elements.unFocusDroppableArea);\r\n        pageBuilder.container.on('dragenter','[data-element]', Elements.focusDroppableArea);\r\n        pageBuilder.container.on('dragover','[data-element]', Elements.preventDragOver);\r\n        pageBuilder.container.on('drop','[data-element]', Elements.dropElements);\r\n        pageBuilder.container.on('click','.pb-delete-coll, .pb-delete-elem', Elements.removeElement);\r\n        pageBuilder.container.on('click','.pb-duplicate-ui', Elements.duplicateElement);\r\n\r\n\t}\r\n\r\n    ,setUniqueId : function(){\r\n    \r\n        var drag_handlers = pageBuilder.elements.find('[data-draggble-element]');\r\n\r\n        if (drag_handlers.length) {\r\n\r\n            drag_handlers.each(function(i){\r\n\r\n                $(this).attr('id', 'pb-drag-element-' + i);\r\n\r\n            })\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,sortableElements  : function(){\r\n\r\n        var element = pageBuilder.container.find('[data-element]');\r\n    \r\n        if (element.length) {\r\n\r\n            element.parent().sortable({\r\n                handle: '.pb-elem-sort-icon',\r\n                cancel: $(this).find('.pb-coll-editor-settings'),\r\n                start: function (event, ui) {\r\n                    ui.item.addClass(\"highlight\");\r\n                },\r\n                stop: function (event, ui) {\r\n                    ui.item.removeClass(\"highlight\");\r\n                },\r\n                classes: {\r\n                    \"ui-sortable\": \"pb-sortable-item\"\r\n                }\r\n            }); \r\n\r\n        }\r\n        \r\n    }\r\n\r\n    ,sortableColumns  : function(){\r\n\r\n        var element = pageBuilder.container.find('[data-column]');\r\n    \r\n        if (element.length) {\r\n\r\n            element.parent().sortable({\r\n                handle: '.pb-coll-sort-icon',\r\n                cancel: $(this).find('.pb-editor-settings'),\r\n                start: function (event, ui) {\r\n                    ui.item.addClass(\"highlight\");\r\n                },\r\n                stop: function (event, ui) {\r\n                    ui.item.removeClass(\"highlight\");\r\n                },\r\n                classes: {\r\n                    \"ui-sortable\": \"pb-sortable-item\"\r\n                }\r\n            }); \r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Prevent default to allow drop */\r\n    ,preventDragOver : function(e){\r\n    \r\n        e.preventDefault();\r\n        \r\n    }\r\n\r\n\t/* Set Draggble Elements */\r\n    ,droppableElements : function(e){\r\n          \r\n        e.dataTransfer.setData('html', e.target.id);\r\n\r\n        Elements.elem_id = $(this);\r\n        \r\n    }\r\n\r\n    /* Focus droppble placeholders */\r\n    ,focusDroppableArea : function(e){\r\n      \r\n        var self = $(this);\r\n\r\n        if (Elements.elem_id !== null && Elements.elem_id.attr('id').indexOf('element') !== -1) {\r\n            pageBuilder.container.find('.ready-to-drop-element').removeClass('ready-to-drop-element');\r\n            self.addClass('ready-to-drop-element');\r\n        }\r\n            \r\n        \r\n    }\r\n\r\n    ,unFocusDroppableArea : function(){   \r\n\r\n        setTimeout(function(){\r\n            pageBuilder.container.find('[data-element]').removeClass('ready-to-drop-element');\r\n            Elements.elem_id = null;\r\n        },100)\r\n        \r\n        \r\n    }\r\n\r\n     /* Set Draggble Components */\r\n    ,dropElements : function(e){\r\n\r\n        e.preventDefault();\r\n\r\n        var data = e.dataTransfer.getData(\"html\", e.target),\r\n            target = $(this);\r\n\r\n        Elements.loadElement(data, target)\r\n \r\n        \r\n    }\r\n\r\n    /* Load master component */\r\n    ,loadElement : function(data, target){\r\n    \r\n        var element = $('#' + data);\r\n            element_url = element.data('element');\r\n\r\n        if (typeof element_url !== 'undefined') {\r\n\r\n            $.ajax({\r\n                    url: element_url,\r\n                    type: 'post',\r\n                    data: {},\r\n                    success: function (data) {\r\n\r\n                        Elements.appendElement(element, target, data)\r\n\r\n                    }\r\n                });\r\n\r\n        }\r\n    }\r\n\r\n    /* Append master element */\r\n    ,appendElement : function(element, target, data){\r\n\r\n        if (target.hasClass('ready-to-drop-element') && Elements.elem_id !== null) {\r\n\r\n            if (target.length) {\r\n\r\n                var $data = $(data);\r\n                target.after($data);\r\n\r\n                if (target.hasClass('pb-elem-paceholder')) {\r\n\r\n                    target.remove();\r\n\r\n                }\r\n\r\n            }\r\n\r\n        } \r\n\r\n        Elements.unFocusDroppableArea();\r\n        Elements.appendElemHelpers($data);\r\n        Elements.appendColumnHelpers($data);\r\n        Elements.sortableElements();\r\n        Elements.sortableColumns();\r\n\r\n        Elements.elem_id = null;\r\n\r\n\r\n    }\r\n\r\n    ,appendElemHelpers : function(data){\r\n        \r\n        var components = typeof data !== 'undefined' ? data : pageBuilder.container.find('[data-editable]');\r\n\r\n        var settings_element = '<div class=\"pb-elem-editor-settings\">'+\r\n                                    '<div class=\"pb-editor-ui\">'+\r\n                                        '<span class=\"pb-elem-ui-icon pb-elem-delete-icon icon-close pb-delete-elem pb-delete-ui\" title=\"Remove\"></span>'+\r\n                                        '<span class=\"pb-elem-ui-icon pb-elem-duplicate-icon icon-icon-file pb-duplicate-elem pb-duplicate-ui\" title=\"Copy\"></span>'+\r\n                                        '<span class=\"pb-elem-ui-icon pb-elem-sort-icon icon-star\"  title=\"Edit\"></span>'+\r\n                                    '</div>'+\r\n                                '</div>'\r\n\r\n        components.each(function(){\r\n\r\n            var self = $(this);\r\n\r\n            if (self.find('.pb-elem-editor-settings').length == 0 && !pageBuilder.check(self, 'data-column') && !pageBuilder.check(self, 'data-widget')) {\r\n\r\n                self.append(settings_element);\r\n\r\n            }\r\n\r\n        })\r\n\r\n\r\n    }\r\n\r\n    ,appendColumnHelpers : function(data){\r\n        \r\n        var components = typeof data !== 'undefined' ? data : pageBuilder.container.find('[data-column]');\r\n        var settings_element = '<div class=\"pb-coll-editor-settings\">'+\r\n                                    '<div class=\"pb-editor-ui\">'+\r\n                                        '<span class=\"pb-coll-ui-icon pb-coll-sort-icon icon-star\"  title=\"Edit\"></span>'+\r\n                                        '<span class=\"pb-coll-ui-icon pb-coll-duplicate-icon icon-icon-file pb-duplicate-coll pb-duplicate-ui\" title=\"Copy\"></span>'+\r\n                                        '<span class=\"pb-coll-ui-icon pb-coll-delete-icon icon-close pb-delete-coll pb-delete-ui\" title=\"Remove\"></span>'+\r\n                                    '</div>'+\r\n                                '</div>'\r\n\r\n        components.each(function(){\r\n\r\n            var self = $(this);\r\n\r\n            if (self.find('.pb-coll-editor-settings').length == 0 && pageBuilder.check(self, 'data-column')) {\r\n\r\n                self.append(settings_element);\r\n\r\n            }\r\n\r\n        })\r\n\r\n\r\n    }\r\n\r\n    /* Remove Element */\r\n    ,removeElement : function(){\r\n\r\n        var self = $(this),\r\n            element = self.closest('[data-editable]'),\r\n            siblings = element.siblings('[data-editable]');\r\n\r\n        Elements.resetEditedElem(element);\r\n\r\n        if (siblings.length < 1) {\r\n\r\n            element.parent().append('<div class=\"pb-elem-paceholder\" data-element></div>')\r\n        }\r\n\r\n        element.remove();\r\n        \r\n    }\r\n\r\n    /* Reset Element */\r\n    ,resetEditedElem : function(element){\r\n    \r\n        if (Editor.elem !== null && element.hasClass('pb-editing')) {\r\n\r\n            Editor.elem = null;\r\n            $('#pb-components-btn').trigger('click');\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    /* Duplicate elememt */\r\n    ,duplicateElement : function(e){\r\n    \r\n        var self = $(e.target),\r\n            element = self.closest('[data-editable]'),\r\n            element_prototype = element[0].outerHTML,\r\n            new_element = $(element_prototype);\r\n\r\n        Elements.getElementIds(element, new_element)\r\n        \r\n    }\r\n\r\n    ,getElementIds : function(element, new_element){\r\n\r\n        var ids = []\r\n\r\n        if (typeof element.prop('id') !== 'undefined' && element.prop('id').match('pb-')) {\r\n\r\n            ids.push(element.prop('id'))\r\n\r\n        }\r\n\r\n        element.find('[data-editable]').each(function(){\r\n\r\n            var self = $(this);\r\n\r\n            if (typeof self.prop('id') !== 'undefined' && self.prop('id').match('pb-')) {\r\n\r\n                ids.push(self.prop('id'))\r\n\r\n            }\r\n\r\n        })\r\n\r\n        Elements.createCloningStyles(element, ids, new_element)\r\n\r\n        \r\n    }\r\n\r\n    ,createCloningStyles  : function(element, ids, new_element){\r\n\r\n        if (ids.length !== 0) {\r\n    \r\n            for (var i = 0; i < ids.length; i++) {\r\n\r\n                var id = ids[i].replace(/[0-9]/g, ''),\r\n                    new_id = id + '' + (new Date()).getTime(),\r\n                    elem_prop = $.extend(true,{}, Editor.chache_styles[ids[i]]);\r\n\r\n                new_element.filter('#' + ids[i]).removeClass('pb-editing').prop('id', new_id);\r\n                new_element.find('#' + ids[i]).removeClass('pb-editing').prop('id', new_id);\r\n\r\n                if (typeof elem_prop !== 'undefined') {\r\n\r\n                    Editor.chache_styles[new_id] = elem_prop;\r\n                    Editor.addStyleTag(new_id);\r\n                    Elements.applyCloningStyles(new_id);\r\n\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        element.after(new_element);\r\n        Elements.sortableColumns();\r\n        Elements.sortableElements();\r\n        \r\n    }\r\n\r\n    ,applyCloningStyles  : function(new_id){\r\n    \r\n        var stylesheet = pageBuilder.iframe.contents().find('#pb-style-' + new_id);\r\n\r\n        if (stylesheet.length && Editor.chache_styles.hasOwnProperty(new_id)) {\r\n\r\n            var styles = Editor.chache_styles[new_id].styles,\r\n                selector = '#pb-page-builder #' + new_id;\r\n\r\n            stylesheet.text(Editor.createStyleText(selector, styles))\r\n\r\n        }\r\n        \r\n    }\r\n\r\n}"]}